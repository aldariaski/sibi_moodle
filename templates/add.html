<script>
    console.log("uuwooooooo")

    var submitButton = document.getElementById('id_submitbutton');
    var cancelButton = document.getElementById('id_cancel')

    submitButton.setAttribute("onclick", "skipClientValidation = true; return true;");
    submitButton.setAttribute("data-skip-validation", "1")
    submitButton.setAttribute("data-cancel", "1")

    submitButton.addEventListener('click', function (event) {
        // event.preventDefault();

        var url = document.getElementById('id_url').value;
        //var subtitle = document.getElementById('id_subtitle').value;

        var data = {
            url: url,
            subtitle: subtitle
        };

        var xhr = new XMLHttpRequest();
        /*xhr.open('POST', 'http://34.101.204.135:4444/', true);*/
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    // Request succeeded
                    var response = JSON.parse(xhr.responseText);
                    console.log(response);
                } else {
                    // Request failed
                    console.error('Request failed with status:', xhr.status);
                }
            } else {
                // Request failed
                console.error('Request failed with status:', xhr.status);
            }
        };

        xhr.send(JSON.stringify(data));

        console.log("message sent");

        // window.onbeforeunload = null;
        // window.location.href = '/local/sign/manage.php';
    }); 
</script>
